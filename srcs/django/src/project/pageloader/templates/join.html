<div class="container mt-4">
    <!-- Sezione per i giochi -->
    {% if games is not None %}
        <h2>Join New Game</h2>
        <div class="row" style="height: 30vh; overflow-y: auto;">
            {% if games %}
                {% for game in games %}
                <div class="col-md-12 mb-3">
                    <div class="card" style="background-color: #f8f9fa; min-height: 100px; min-width: 900px;">
                        <div class="card-body d-flex justify-content-between align-items-center">
                            <div class="row w-100 align-items-center">
                                <!-- Colonna per il nome del gioco (ridotto) -->
                                <div class="col-lg-5 col-12 d-flex align-items-center" style="flex-grow: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                    <h5 class="card-title mb-0">{{ game.name }}</h5>
                                </div>
                                <!-- Colonna per i giocatori (più ampia) -->
                                <div class="col-lg-3 col-6 d-flex align-items-center">
                                    <p class="card-text mb-0">Players: {{ game.player_inlobby }}/{{ game.player_limit }}</p>
                                </div>
                                <!-- Colonna per la modalità (ridotta) -->
                                <div class="col-lg-2 col-3 d-flex align-items-center">
                                    <p class="card-text mb-0">Mode: {{ game.mode }}</p>
                                </div>
                                <!-- Colonna per il pulsante -->
                                <div class="col-lg-2 col-3 d-flex justify-content-end">
                                    <button class="btn btn-primary join-btn" data-game-id="{{ game.id }}">Join</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="col-md-12 mb-3">
                    <div class="card" style="background-color: #f8f9fa; min-width: 650px;">
                        <div class="card-body d-flex justify-content-center align-items-center">
                            <h5 class="card-title mb-0">No games available</h5>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    {% endif %}

    <!-- Sezione per i nuovi tornei -->
    {% if tournaments is not None %}
        <h2>Join New Tournament</h2>
        <div class="row" style="height: 70%; overflow-y: auto;">
            {% if tournaments %}
                {% for tournament in tournaments %}
                <div class="col-md-12 mb-3">
                    <div class="card" style="background-color: #f8f9fa; min-height: 100px; min-width: 900px;">
                        <div class="card-body d-flex justify-content-between align-items-center">
                            <div class="row w-100 align-items-center">
                                <!-- Colonna per il nome del torneo (ridotto) -->
                                <div class="col-lg-5 col-12 d-flex align-items-center" style="flex-grow: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                    <h5 class="card-title mb-0">{{ tournament.name }}</h5>
                                </div>
                                <!-- Colonna per i giocatori in lobby (più ampia) -->
                                <div class="col-lg-3 col-6 d-flex align-items-center">
                                    <p class="card-text mb-0">Players in lobby: {{ tournament.players_in_lobby }}/{{ tournament.nb_players }}</p>
                                </div>
                                <!-- Colonna per la modalità (ridotta) -->
                                <div class="col-lg-2 col-3 d-flex align-items-center">
                                    <p class="card-text mb-0">Mode: {{ tournament.mode }}</p>
                                </div>
                                <!-- Colonna per i pulsanti -->
                                <div class="col-lg-2 col-3 d-flex justify-content-end" style="gap: 10px;">
                                    <button class="btn btn-primary join-btn" data-tournament-id="{{ tournament.id }}">Join</button>
                                    {% if user.username == tournament.owner.username %}
                                    <button class="btn btn-danger delete-btn" data-tournament-id="{{ tournament.id }}">Delete</button>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="col-md-12 mb-3">
                    <div class="card" style="background-color: #f8f9fa; min-width: 650px;">
                        <div class="card-body d-flex justify-content-center align-items-center">
                            <h5 class="card-title mb-2">No new tournaments available</h5>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    {% endif %}

    <!-- Sezione per i tornei attivi -->
    {% if active_tournaments is not None %}
        <h2>Join Active Tournaments</h2>
        <div class="row" style="height: 70%; overflow-y: auto;">
            {% if active_tournaments %}
                {% for tournament in active_tournaments %}
                <div class="col-md-12 mb-3">
                    <div class="card" style="background-color: #f8f9fa; min-height: 100px; min-width: 900px;">
                        <div class="card-body d-flex justify-content-between align-items-center">
                            <div class="row w-100 align-items-center">
                                <!-- Colonna per il nome del torneo (ridotto) -->
                                <div class="col-lg-5 col-12 d-flex align-items-center" style="flex-grow: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                    <h5 class="card-title mb-0">{{ tournament.name }}</h5>
                                </div>
                                <!-- Colonna per i giocatori in lobby (più ampia) -->
                                <div class="col-lg-3 col-6 d-flex align-items-center">
                                    <p class="card-text mb-0">Players: {{ tournament.players_in_lobby }}/{{ tournament.nb_players }}</p>
                                </div>
                                <!-- Colonna per la modalità (ridotta) -->
                                <div class="col-lg-2 col-3 d-flex align-items-center">
                                    <p class="card-text mb-0">Mode: {{ tournament.mode }}</p>
                                </div>
                                <!-- Colonna per i pulsanti -->
                                <div class="col-lg-2 col-3 d-flex justify-content-end" style="gap: 10px;">
                                    <button class="btn btn-primary join-btn" data-tournament-id="{{ tournament.id }}">Rejoin</button>
                                    {% if user.username == tournament.owner.username %}
                                    <button class="btn btn-danger delete-btn" data-tournament-id="{{ tournament.id }}">Delete</button>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="col-md-12 mb-3">
                    <div class="card" style="background-color: #f8f9fa; min-width: 650px;">
                        <div class="card-body d-flex justify-content-center align-items-center">
                            <h5 class="card-title mb-2">No active tournaments available</h5>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    {% endif %}

    <!-- Altri bottoni -->
    <div class="row justify-content-center">
        <button id="refresh-btn" class="btn btn-secondary mt-3">Refresh</button>
    </div>
    <div class="row justify-content-center">
        <button type="button" id="go-back-btn" class="btn btn-warning my-3">Back</button>
    </div>
</div>
